//OPRET DATABASEN FØRST
create database "DBData";

//Oprettelse af produktionstabellen
create table production
(
	id serial not null,
	titel varchar(50) not null,
	genre varchar(50) not null,
	release_year int not null
);

create unique index movie__pk
	on production (id);

create unique index production_id_uindex
	on production (id);

alter table production
	add constraint movie_pk
		primary key (id);

//Oprettelse af krediteringstabellen
create table credit
(
	movie_id int not null
		constraint credit_movie_id_fkey
			references production
				on delete cascade,
	cast_id int not null
		constraint credit_cast_id_fkey
			references production
				on delete cascade,
	name varchar(50) not null,
	role varchar(50) not null
);

create unique index credit__pk
	on credit (movie_id, cast_id);

alter table credit
	add constraint credit_pk
		primary key (movie_id, cast_id);

//Oprettelse af login tabellen
create table login
(
	id int not null,
	username varchar(50) not null,
	password int not null,
);

create unique index login__pk
	on login (id);

create unique index login_id_uindex
	on login (id);

alter table login
	add constraint login_pk
		primary key (id);

//Indsættelse af 3 produktioner
INSERT INTO production (titel, genre, release_year)
VALUES ('Armadillo', 'Dokumentar', 2010);

INSERT INTO production (titel, genre, release_year)
VALUES ('Blå Mænd', 'Komedie', 2008);

INSERT INTO production (titel, genre, release_year)
VALUES ('De Grønne Slagtere', 'Komedie', 2003);


//Indsættelse af 3 krediteringer
INSERT INTO credit (movie_id, cast_id, name, role)
VALUES (1, 1, 'Ronnie Fridthjof', 'Producer');

INSERT INTO credit (movie_id, cast_id, name, role)
VALUES (2, 1, 'Thure Lindhardt', 'Jesper Jensen');

INSERT INTO credit (movie_id, cast_id, name, role)
VALUES (2, 2, 'Mick Øgendahl', 'Dion Drejer');


//Indsættelse af 3 brugere i systemet
INSERT INTO login (username, password)
VALUES ('Jhon', 12345, 1);

INSERT INTO login (username, password)
VALUES ('David', 09876, 2);

INSERT INTO login (username, password)
VALUES ('Stefan', 55667, 3);